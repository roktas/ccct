Analyze Code CCTs of VS Code syntax highlight themes.

### Directory structure

- `srv`: All data files that are the main product and, inputs of this repository.

  This directory is organized by syntax highlighting themes.  There are 2 important files in each sub directory:

  * `source.yml`: Meta data for processing.  This file is mandatory.

  * `raw.html`: Syntax highlighted source code in HTML generated by VS Code in raw form.  This file is mandatory.

  All the other files are computed data files.

  * `font.bdf`: BDF format of the TTF font which is defined in `source.yml`.

  * `font-ir.json`: JSON representation of BDF font.

  * `source.html`:  Prettified HTML of syntax highlighted source code.

  * `source-ir.json`:  JSON representation of syntax highlighted source code.

  * `source-ir+.json`: Extended JSON representation of syntax highlighted source code with color CCTs.

  * `result.json`: Result file.

- `share`: All common files for analyze.

  * `fonts`: TTF fonts.

  * `sources`: Source samples with proper extensions, i.e. `source.c` for C

  * `themes.yml`: Meta data for themes.

- `libexec`: Core scripts doing all the computation step by step.

  Read the comments in source code for details.

- `share`: Shared data files across the scripts, e.g. TTF fonts.

- `lib`: Common library codes that can be used in scripts.

- `bin`: Top level wrappers around the computation scripts in `libexec`.

  See "Hacking" section.

- `sbin`: Administrative scripts that are expected to be run with admin rights to provision the working environment.

  See "Hacking" section.

### Hacking

#### Getting started

After cloning the repository

- Bootstrap

  ```sh
  sudo env PATH=$PATH sbin/bootstrap
  ```

- Make all files

  ```sh
  bin/make
  ```

  or if `direnv` installed on your system, load `.envrc` with `direnv allow` and run commands directly:

  ```sh
  make
  ```

- Remake all files

  ```sh
  bin/remake
  ```

- Compile paper

  ```sh
  cd doc
  latexmk --shell-escape
  ```

- Format BibTeX file

  ```sh
  cd doc
  bibtool -s -i manuscript.bib -o manuscript-sorted.bib
  mv manuscript-sorted.bib manuscript.bib
  ```

#### Generating syntax highlighted sources in HTML format

- Open the source with the selected color theme

- Run "Copy with Highlight" from Command Palette

- Select all and press Ctrl-C to copy to clipboard

- Open a Powershell terminal and, invoke the following command

  ```dos
  Get-Clipboard -TextFormatType Html | Set-Clipboard
  ```

- Create a blank HTML file in VS Code and, press Ctrl-V to paste from clipboard

  or from CLI

  ```dos
  Get-Clipboard >raw.html
  ```
